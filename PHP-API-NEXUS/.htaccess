RewriteEngine On

# Configuración PHP para APIs JSON limpias
php_flag display_errors Off
php_flag log_errors On
php_value error_log /tmp/php_api_errors.log

# Configuración de charset
AddDefaultCharset UTF-8

# Manejar requests OPTIONS para CORS
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ cors-handler.php [L]

# Routing principal - redirigir todas las rutas al index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L,QSA]

# Evitar que se muestren archivos .env y de configuración
<Files ".env*">
    Order allow,deny
    Deny from all
</Files>

<Files "*.php">
    <IfModule mod_php.c>
        php_flag display_errors Off
        php_flag log_errors On
    </IfModule>
</Files>
